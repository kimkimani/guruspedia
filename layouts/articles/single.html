{{ define "main" }} {{ $author_page := (printf "/authors/%s/index.md"
.Params.author) }}
<article>
  <section class="hero-blocks xs-pt-10 xs-pb-20 sm-pt-40 sm-pb-30 -blue-blocks">
    <div class="section-container relative">
      <div class="hero-blocks-inner relative prl-5">
        <div class="hero-blocks-middle">
          <h1 class="title-3 bold xs-mb-20">{{ .Title }}</h1>
          {{ if .Date }}
          <h5 class="text-14">Posted {{ .Date.Format "January 2, 2006" }}</h5>
          {{ end }} <img class="heroimage relative prl-5 sm-pt-20" src="{{ if eq
          $.Site.Params.env " local" }}{{ replace (index .Params.images 0).url "guruspedia/" "" }}{{ else }}{{ (index
            .Params.images 0).url }}{{ end }}" alt="{{ (index .Params.images 0).alt }}" />
        </div>
      </div>
    </div>
  </section>

  <section class="section-rich-text blog-styling xs-pb-10">
    <div class="blog-styling">
      <div class="section-rich-text-inner prl-5 blog-styling">
        <div class="section-rich-text-leading blog-styling">{{ .Content }}</div>
        {{ if hugo.Environment | eq "development" }}
        <script type="text/javascript">
          var images = document.getElementsByTagName("img");
          for (var i = 0; i < images.length; i++) {
            images[i].src = images[i].src.replace("/", "/");
          }
        </script>

        {{ end }}

        <div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1 pt-2">
          {{ with .Params.topics }}
          <div>
            <div>
              <svg class="tags__badge" width="16" height="16" viewBox="0 0 32 32">
                <path
                  d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z">
                </path>
              </svg>
            </div>
            <div class="tag-links">
              {{ range . }} {{- $topicURLparts := slice "topic" (urlize .) -}}
              {{- $topicURL := delimit $topicURLparts "/"| printf "/%s/" -}}
              <a href="{{ $topicURL }}">{{ . }}</a>
              {{ end }}
            </div>
          </div>
          {{ end }}
        </div>

        <!-- <div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1 pt-2">
          {{ if .Params.topics }}
            <div class="tag-links">
              <div class="tag-icon">
                <svg class="tags__badge" width="16" height="16" viewBox="0 0 32 32">
                  <path
                    d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z">
                  </path>
                </svg>
              </div>
              {{ range .Params.topics }}
                <a href="{{ $.Site.LanguagePrefix | absURL }}topic/{{ . | urlize }}/">{{ . }}</a>
              {{ end }}
            </div>
          {{ end }}
        </div> -->

        {{if .Params.author}}
        <div class="author-card">
          {{ with $.Site.GetPage $author_page }}
          <div class="image-circular">
            <div class="card-image">
              {{ range .Resources }} <img src="{{ (.Resize " 180x").Permalink }}"
                class="img-responsive img-50 img-round" alt="" />
            </div>
            {{ end }}
          </div>
          <div class="card-body">
            <div class="card-body-titles">
              <p class="p-0 m-0">
                <small class="text-muted">Written By:</small>
              </p>
              <h3 class="">
                <a class="" href="{{ .Permalink }}">{{ .Params.title }}</a>
              </h3>
            </div>
            <div class="author-descpt">
              <p>{{.Content}}</p>
            </div>
          </div>
          {{end}}
        </div>
        {{ end }}
      </div>
    </div>
  </section>

  {{ $related := .Site.RegularPages.RelatedIndices . "topics" | first 4 }} {{
  with $related }}

  <section class="enged-listing-posts">
    <div class="enged-listing-posts-container">
      <div class="enged-listing-posts-content">
        <div class="enged-listing-posts-header sm-pt-10">
          <h3 class="title title-5.5">More Related Articles:</h3>
        </div>

        <ul>
          {{ range . }}
          <li class="enged-listing-posts-item mix flex cta-shadow flex-column">
            <a class="decoration-none xs-pb-20 xs-pt-20 prl-25 flex" href="{{.Permalink}}">
              <div class="enged-listing-posts-item-image">
                <img src="{{ if eq $.Site.Params.env " local" }}{{ replace (index .Params.images
                  0).url "/engineering-education" "" }}{{ else }}{{ (index .Params.images 0).url }}{{ end }}" {{ if
                  (index .Params.images 0).alt}} alt="{{ (index .Params.images 0).alt }}" {{ end }} />
              </div>
              <div class="enged-listing-posts-item-details">
                <div class="enged-listing-posts-item-details-inner">
                  <h3 class="title-3 text-link xs-mb-10">{{.Title}}</h3>
                  <p class="text-18-regular text-color">
                    {{ .Summary | plainify | truncate 150 "" }}
                  </p>
                  <p class="text-blockquote">
                    {{ .Date.Format "Jan 2, 2006" }}
                  </p>
                </div>
              </div>
            </a>
          </li>
          {{ end }}
        </ul>
      </div>
    </div>
  </section>
  {{ end }}
</article>

{{ end }}